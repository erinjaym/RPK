<html>
<style>
  html {
background-color: rgb(48, 50, 75);
color: rgb(146, 140, 142);
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
  }
  button {
    background-color:rgb(83, 7, 58);
    border-radius: 5%;
    border-color: darkmagenta;
  }

  button:hover {
    background-color:rgb(83, 7, 7);
  }

.results {
background-color: black;
opacity: 0.5;
font-color: red;

}

</style>



<head><h1><center>RPK for the masses</center></h1> 
<title> RPK BITCHES! </title> 
    <meta charset= "UTF-8"/>
</head>
<body>
  <center>Please choose your soldier to fight the skynet RPK insurgency!<br><br>

  
   <table> 
     <div id= selections>
      <button id=2 alt id="paper"><img src = "images/paper.jpg" height="300px" width="300px"></button>
      <button id=1 alt id="rock"><img src = "images/rock.png" height="300px" width="300px"></button>
      <button id=3 alt id="scissors"><img src = "images/scissors.png" height="300px" width="300px"></button>
    </div>
  </table>
  <div id="winner" style="color: red;"><h2> </h2></div>
    <div ><h2>Computer wins:</h2></div> <div id="compResults">0</div>
    <div><h2>Player wins:</h2></div><div class= results; id="playerResults">0</div>
    <div><h2>Ties:</h2><div id="tieResults">0</div>

  
  </center>
   
   <script>
game();

  

function game (){
  let roundCount = 0; 
  let playerCount = 0;
  let computerCount = 0;
  let tieCount = 0;

const buttons = document.querySelectorAll('button');
buttons.forEach((button) => {

// and for each one we add a 'click' listener
button.addEventListener('click', () => {
const playerSelection = button.id;
console.log(playerSelection);
playRound(button.id, computerPlay());


  function computerPlay() //Computers choice input
    {
       let compAnswer = 0; 
      
        let compChoice = Math.floor(Math.random() * 3);
        
        if (compChoice <= 1)
        {
        let compAnswer = 1; 
        
        return compAnswer; 
        }
        else if (compChoice = 2)
        {
        let compAnswer = 2; 
        
        return compAnswer; 
        }
        else if (compChoice = 3)
        {
          let compAnswer = 3; 
          
          return compAnswer; 
        }
    return compAnswer; 
   } 

  
 // Fixed 
  function playRound(playerSelection, computerSelection) 
  {
    console.log(playerSelection + " " + computerSelection); //Print each round selections
    // Rock- 1 Paper-2 Scissors-3
    if (playerSelection == computerSelection)
      {
      tieCount ++;
      return "You TIED!";
      }
    else if (playerSelection == 3 && computerSelection == 1) // Scissors vs rock
      {       
      computerCount ++; 
      return "Player Loses!";
      }
    else if (playerSelection == 3 && computerSelection == 2) // scissors vs paper
      {       
      playerCount ++; 
      console.log("Scissors beats paper");
      return "Player wins!";
      }

    else if (playerSelection == 2 && computerSelection == 1) // Paper vs rock
      { 
       playerCount ++; 
       return "Player Wins!"; 
      }
    else if (playerSelection == 2 && computerSelection == 3) // Paper vs scissors
        {
        computerCount ++; 
        return "Player loses!";
        }

    else if (playerSelection == 1 && computerSelection == 2) // Rock vs paper
        { 
        computerCount ++; 
        return "Player Loses!"; 
        }
    else if (playerSelection == 1 && computerSelection == 3) // Rock vs scissors
        { 
        playerCount ++; 
        return "Player wins";
        }
    else 
      { 
      console.log("base case");
      }
  }

  // Tallies each round tally 
  function tallyScore (playerScore,computerScore)
  {
    if (playerScore < computerScore)
      {
      return "The computer";
      }
    else if (computerScore == playerScore)
      {
      return "(Tie) Nobody";
      }
    else 
      {
     return "The Player";
      }
  } 

// after 5 rounds call this end game tally

  function finalTally (playerScore,computerScore)
  {
    if (playerScore < computerScore)
      {
      return "The computer";
      }
    else if (computerScore == playerScore)
      {
      return "(Tie) Nobody";
      }
    else 
      {
     return "The Player";
      }
  } 




document.getElementById("compResults").lastChild.textContent = computerCount;
document.getElementById("playerResults").lastChild.textContent = playerCount;
document.getElementById("tieResults").lastChild.textContent = tieCount;


document.getElementById("winner").lastChild.textContent = "Your fate has been decided: \n" + tallyScore(+ playerCount, computerCount) + " wins! \n\n";
//Note who wins ... if computer print computer if player print player if tie print tie. If five rounds end game. 
console.log("Your fate has been decided: \n" + tallyScore(playerCount, computerCount) + " wins! \n\n" + "Player had " + playerCount + " wins! \n" + "Computer had " + computerCount + " wins!"); //print results



// Reset after 5 rounds 
if (computerCount == 5 || playerCount == 5){
console.log(finalTally()); 
// Need to add a if comp
if (computerCount < playerCount) // Player wins

{
  alert ("GAME OVER! " + finalTally(playerCount, computerCount) + " Wins " + playerCount + " to " + computerCount );

}

else if (computerCount > playerCount)//computer wins

{
  alert ("GAME OVER! " + finalTally(playerCount, computerCount) + " Wins " + computerCount + " to " + playerCount);
}

else  //Tie game
{
  alert ("GAME OVER! " + finalTally(playerCount, computerCount) + " Wins.");

}
//reset game counters
roundCount = 0; 
playerCount = 0;
computerCount = 0;
tieCount = 0;
//reset screen info
document.getElementById("compResults").lastChild.textContent = computerCount;
document.getElementById("playerResults").lastChild.textContent = playerCount;
document.getElementById("tieResults").lastChild.textContent = tieCount;
}

else{}




}); // end windows listener
}); // end windows listener

} // end game







    </script>
</body>
</html>


